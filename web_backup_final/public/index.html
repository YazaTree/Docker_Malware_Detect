<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" href="./style_test.css">
        <link rel="stylesheet" href="./style_test.css">
        <link rel="icon" href="./favicon-32x32.png">
        <!-- 폰트 -->
        <title>Docker Detect</title>
    </head>
    <body>
        <div class="container">
            <div class="main">
                <div class="main-title">
                    <p id="title">Docker Detect</p>
                    <p style="text-align: center; font-family: 'NanumSquare', sans-serif; font-weight: 500; margin-bottom: 10px;"><a href="https://hub.docker.com/search?q="target="_blank" style="color:white;">Docker Hub</a> 내 도커 이미지를 검사할 수 있습니다. 검사하고자 하는 도커 이미지를 입력해주세요.</p>
                    <!--<p style="text-align: center; font-family: 'NanumSquare', sans-serif; font-weight: 500; margin-top: 10px;">*최신 버전 도커 이미지를 대상으로 분석을 진행하며, 구버전 도커 이미지는 분석을 지원하지 않습니다.</p>-->
                    <!--<p id="main-content">We can detect all docker image. Just put the image name</p>-->
                </div>

                <div class="searchf">
                    <form method="POST" id="searchForm">
                        <div class="search"> <!--검색창-->
                            <input type="text" name="search_box" placeholder="pull ( image name) ">
                            <button type="submit" class="navyBtn">
                                <img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png" style="width: 17px;">
                            </button>
                        </div>
                    </form>
                </div>

		<div>
			<h3>Recent Search Docker images</h3>
            <!-- <h3>Recent View Analysis report</h3> -->
            <hr>
			<ul id="recentSearchList"></ul>
		</div>
            </div>
        </div>

    <!-- 팀원 소개 -->
    <div class="wrap">
        <hr id="line">

        <div class="us-mem" style="font-family: 'NanumSquare', sans-serif; font-weight: 700">           
            <div id="mem">
                <h2 id="tit">About us</h2>
                <p>Uni : Joongbu Uni.</p>
                <p>Team : Yazatree</p>
                <!--<p>Github : <a href="https://github.com/YazaTree/Docker_Malware_Detect">git</a></p>-->
                
            </div>
            <div id="mem">
                <h2 id="tit">Member</h2>
                <p>Static analysis : seomj</p>
                <p>Dynamic analysis : young-da</p>
                <p>Sandbox : jagym105</p>
                <p>Consulting : lyk0331</p>
                <p>Web : haehae00, SHNam00, c0wb3ll</p>
            </div>
        </div>
    </div>
    <!-- <div class="about">
        <div id="member">
            <p id="ff">About us</p>
            <p>Dynamic analysis : young-da <span>|</span> Static analysis : seomj</p>
            <p>Vulnerability analysis : lyk0331 <span>|</span> Sandbox : jagym105 </p>
            <p>Web : haehae00, SHNam00</p>
        </div>
    </div> -->

    <script>
	    function navigateToSearch(searchString) {
		const searchURL = `/fetch-data?search_box=${encodeURIComponent(searchString)}`;
		window.location.href = searchURL;
	    }

	    async function fetchRecentSearches() {
		try {
			const response = await fetch('/recent-search');
			const recentSearches = await response.json();
			const recentSearchList = document.getElementById('recentSearchList');

			recentSearchList.innerHTML = '';

			recentSearches.forEach(searchString => {
				const listItem = document.createElement('li');
				listItem.textContent = searchString;

				listItem.addEventListener('click', () => {
					navigateToSearch(searchString);
				});

				recentSearchList.appendChild(listItem);
			});
		} catch (error) {
			console.error(error);
		}
	}

	window.addEventListener('load', fetchRecentSearches);

    </script>
    </body>
</html>
